import os
import shutil

os.mkdir('data3')

with open('subdata/function_list.txt') as f:
    functions = f.read()
    splitted = functions.split('\n')

    lib = dict(zip(splitted, range(1, len(splitted) + 1)))

def make_index(name):
    if name in lib:
        return lib[name]
    else:
        return 0

for name in os.listdir('data2'):
    with open('data2/' + name) as f:
        data = f.read()

        splitted = data.split('\n')
        mapped = map(lambda x: str(make_index(x)), splitted[1:])
        new_data = splitted[0] + '\n' + '\n'.join(mapped)

    with open('data3/' + name, 'w') as f:
        f.write(new_data)

shutil.rmtree('data2')
