import os
import shutil
from random import shuffle

virus_trains = os.listdir('../logs')
normal_trains = os.listdir('../log_clean')

data_samples = []

os.mkdir('./data0')
os.mkdir('./data1')

for name in virus_trains:
    with open('../logs/' + name) as f:
        data = f.read()

        splitted = data.split(']')
        new_data = '[1]' + splitted[1]

    with open('data0/' + name, 'w') as f:
        length = len(new_data.split('\n'))

        if length > 10 and length < 100000:
            f.write(new_data)
            data_samples.append(name)

shuffle(data_samples)
data_samples = data_samples[:300]

for name in normal_trains:
    with open('../log_clean/' + name) as f:
        data = f.read()

        splitted = data.split(']')
        new_data = '[0]' + splitted[1]

    with open('data0/' + name, 'w') as f:
        f.write(new_data)
        data_samples.append(name)

shuffle(data_samples)

cnt = 0
for name in data_samples:
    with open('data0/' + name) as f:
        data = f.read()

    with open('data1/' + str(cnt + 1), 'w') as f:
        f.write(data)
        cnt += 1

shutil.rmtree('data0')
